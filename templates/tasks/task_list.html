{% extends 'base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>TODO list</h1>
    <a href="{% url 'todo_list:task-create' %}" class="btn btn-primary">Add task</a>
</div>

{% for task in tasks %}
<div class="border rounded p-3 mb-4">

    <h4>
        {{ task.content }}
        {% if task.is_done %}
            <span class="text-success">Done</span>
        {% else %}
            <span class="text-danger">Not done</span>
        {% endif %}
    </h4>

    <p class="text-muted">
        Created: {{ task.created_at }}
        {% if task.deadline %}
            <span class="text-danger ms-2">Deadline: {{ task.deadline }}</span>
        {% endif %}
    </p>

    <p>
        <strong>Tags:</strong>
        {% for tag in task.tags.all %}
            {{ tag.name }}
        {% empty %}
            â€”
        {% endfor %}
    </p>

    <a href="{% url 'todo_list:task-update' task.pk %}" class="me-3">Update</a>
    <a href="{% url 'todo_list:task-delete' task.pk %}" class="me-3 text-danger">Delete</a>

    <!-- Complete / Undo -->
    {% if task.is_done %}
        <a href="{% url 'todo_list:task-toggle' task.pk %}" class="btn btn-secondary float-end">Undo</a>
    {% else %}
        <a href="{% url 'todo_list:task-toggle' task.pk %}" class="btn btn-success float-end">Complete</a>
    {% endif %}

</div>
{% endfor %}
{% endblock %}
